package org.sombrero.model
import net.liftweb.mapper._
import net.liftweb.util.Empty

class Position extends LongKeyedMapper[Position] with IdPK {
  def getSingleton = Position
  
  object left   extends MappedInt(this) {this(0)}
  object top    extends MappedInt(this) {this(0)}
  object width  extends MappedInt(this) {this(0)}
  object height extends MappedInt(this) {this(0)}
  
  object widget extends MappedLongForeignKey(this, Widget) {
    override def dbIndexed_? = true
  }     
  object user   extends MappedLongForeignKey(this, User) {
    override def dbIndexed_? = true
  }    
}
  
object Position extends Position with LongKeyedMetaMapper[Position] {
  def apply(u : User, w : Widget) : Position = {
    find(By (this.user, u.id.is), By (this.widget, w.id.is)) openOr create.user(u).widget(w).saveMe
  }
}
